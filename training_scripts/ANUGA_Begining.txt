# Anuga Hydrodynamic Modeling: Hands On Exercises for flood inundation modeling

# Author information:
Trushnamayee Nanda

### Notebook Series Description:
The series of three notebooks show usage of a unstructured mesh generation, model&mesh setup and run model, respectively.  
### 1) Mesher.py
### 2) Setup_model.py #
### 3) Run_model.py
Note: config_exmpe.yaml file contains all hardcoded parameters defined


#Necessary Datasets:

Please ensure that all the following datasets were downloaded and placed into the "data" subfolder. Zip files should be unziped in the same folder, 

## DEM.tif, river_Centerline.shp, upstream_boundary_line.shp and downstream_boundary_line.shp

1) Mesher.py contains python script to be used in a conda environment where mesher is pre-installed.

It can be used with the DEM.tif and any constraint file such as riverline, flow accumulation, random noise raster etc.
This code will generate an unstructured mesh file name *_USM.shp in the folder specified in the code. After the *_USM.shp is generated, copy the .shp and supporting files into "data" directory 

2) Setup_model.py contains script to read (through config file) DEM and boundary_line files, reading mesh triangles (sanity check for redundant, very small area and other degenerative triangles), extract triangle points and vertices, and interpolating the DEM at triangle vertices 

4)  Run_model.py makes the user do the following steps (using config.yaml and outputs of setup_model)
- uses files generated from mesh such as pts_npy, tris_npy
- sanitizes triangles and makes CCW
- builds domain (as per ANUGA function)
- assigns boundary tags (as per ANUGA function)
- finds inlet, outlet and exterior (as per ANUGA function)
- assigns inlet operator for input discharge (as per ANUGA function)


### How to run the model without hardcoded parameter values, user can customize in config_example.yaml file###

mpiexec -n 4 python run_model.py --config config_example.yaml